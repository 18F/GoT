<!DOCTYPE html>
<html>
<head>
  <meta name="description" content="Details about the awesome wedding of Ms. Jessica Glynn to Mr. Charles Worthington, on August 23 2014 in Beverly, MA">
  <meta property="og:title" content="18F Game of Thrones">
  <link href="assets/css/application.css" media="all" rel="stylesheet" type="text/css" data-skrollr-stylesheet/>
  <script type="text/javascript" src="assets/js/inventory.js"></script>
  <script type="text/javascript" src="assets/js/jquery-2.1.1.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>18F Game of Thrones</title>
</head>

<!-- <div id="player_prompt">
  <div class="propose_a_trade">
    <h3>Player 1</h3>
    <h1>Propose a Trade</h1>
    <button type="submit">OK</button>
  </div>
</div> -->

<body>

  <div id="player_prompt">
    <div class="propose_a_trade">
      <h3>Player 1</h3>
      <h1>Propose a Trade</h1>
      <form id="trade-form">
      <label> What to trade:
        <select name="give" id="give" form="carform">
          <option value=""></option>
        </select>
      </label>

      <label> For:
        <select name="want" id="want" form="carform">
          <option value=""></option>
        </select>
      </label>

      <label>Wth who:
      </label>
        <select name="who" id="who" form="carform">
          <option value=""></option>
        </select>

      <button id="propose_trade_button" type="submit">Propose trade</button>
      </form>
    </div>
  </div>


  <script type="text/javascript">

    //fill in users
    for (n in players) {
        var p = players[n];
        $("#who").append('<option id="' + p.id + '" >' + p.name + '</option>');
    }

    //fill in items
    for (n in items) {
        var p = items[n];
        $("#give").append('<option id="' + p + '" >' + p + '</option>');
        $("#want").append('<option id="' + p + '" >' + p + '</option>');
    }

   $("trade-form").submit( function () {
        
        var player1 = tywin ;//current_player; //global var
        var player2 = get_player_by_id( $("#who").val());

        var give = $("#give").val();
        var want = $("#want").val();
        
        if (check_offer(player1, give)) {

            var to = create_trade(player1, player2, give, want);
            update_inventory(to);

        } else {
            alert("You cannot complete this trade! Don't have the resources bub!");
        }   
   });


    var tr = create_trade(shay, danny, 'dragons', 'ship');
    console.log(tr);
   
    console.log('Does shay have what she is offering?');
    console.log(check_offer(shay, 'dragons'));

    console.log('Does danny have what she is offering?');
    console.log(check_offer(danny, 'ship'));
    
    update_inventory(tr);

    console.log('shays new inventory');
    console.log(shay);
    console.log('dannys new inventory');
    console.log(danny);
    var player_2 = get_player_by_id(2);
    console.log('player id:2 = ' + player_2.name);
  </script>
</body>
