<!DOCTYPE html>
<html>
<head>
  <meta name="description" content="Details about the awesome wedding of Ms. Jessica Glynn to Mr. Charles Worthington, on August 23 2014 in Beverly, MA">
  <meta property="og:title" content="18F Game of Thrones">
  <link href="assets/css/application.css" media="all" rel="stylesheet" type="text/css" data-skrollr-stylesheet/>
  <script type="text/javascript" src="assets/js/inventory.js"></script>
  <script type="text/javascript" src="assets/js/jquery-2.1.1.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>18F Game of Thrones</title>
</head>

<!-- <div id="player_prompt">
  <div class="propose_a_trade">
    <h3>Player 1</h3>
    <h1>Propose a Trade</h1>
    <button type="submit">OK</button>
  </div>
</div> -->

<body>
  <div id="start_turn_prompt">
    <h4><span id="current_player_name">Player 1</span>, it's your turn to propose a trade.</h4>
    <button id="next">Ok</button>
  </div>

  <div id="accept_trade_prompt">
    <h4><span id="current_player_name">Player x</span>, you have been proposed a trade!</h4>
    <button id="next">Review Trade</button>
  </div>

  <div id="review_trade">
    <h4>Trade details</h4>
    <p><span id="trade_from">Player X</span> has offered to trade you <span id="giving_items" class="trade_detail">1 sword</span> for <span id="receiving_items" class="trade_detail">2 Dragons</span>.</p>
    <button id="accept_trade">Accept Trade</button>
    <button id="accept_trade">Reject Trade</button>

    <div id="trade_reviewer_inventory">
    <h5>Your Current Inventory:</h5>
    <ul>
      <li>Swords: <span id="sword_count">1</span></li>
      <li>Dragon: <span id="dragon_count"></span></li>
      <li>Ship: <span id="ship_count"></span></li>
    </ul>
    </div>
  </div>

  <div id="propose_a_trade">
    <div class="propose_a_trade">
      <h3><span id="current_player_name">Player 1</span>: Propose a Trade</h3>
      <div class="trade">
      <form id="trade-form" action="#">
        <label> What to trade:
        <select name="give" id="give" form="carform">
          <option value=""></option>
        </select>
      </label>

      <label> For:
        <select name="want" id="want" form="carform">
          <option value=""></option>
        </select>
      </label>

      <label>Wth who:
      </label>
        <select name="who" id="who" form="carform">
          <option value=""></option>
        </select>

      <button id="propose_trade_button" type="submit">Propose trade</button>
      </form>
      </div>
    </div>
  </div>

  <div id="current_player_inventory">
    <h5>Your Current Inventory:</h5>
    <ul>
      <li>Swords: <span id="sword_count">1</span></li>
      <li>Dragon: <span id="dragon_count"></span></li>
      <li>Ship: <span id="ship_count"></span></li>
    </ul>
  </div>


  <script type="text/javascript">

    //fill in users
    for (n in players) {
        var p = players[n];
        $("#who").append('<option id="' + p.id + '" >' + p.name + '</option>');
    }

    //fill in items
    for (n in items) {
        var p = items[n];
        $("#give").append('<option id="' + p + '" >' + p + '</option>');
        $("#want").append('<option id="' + p + '" >' + p + '</option>');
    }

   $("#trade-form").submit( function (e) {
        var player1 = tywin ;//current_player; //global var
        console.log('ttt');
        console.log($("#who").val());
        var player2 = get_player_by_id( parseInt($("#who").val()));
        console.log(player2);
        var give = $("#give").val();
        var want = $("#want").val();
        
        console.log(check_offer(player1, give));

        if (check_offer(player1, give)) {

            var to = create_trade(player1, player2, give, want);
            update_inventory(to);
            console.log('updated inventory');
        } else {
            alert("You cannot complete this trade! Don't have the resources bub!");
        } 

        e.preventDefault();
        return false;
   });
  </script>
</body>
